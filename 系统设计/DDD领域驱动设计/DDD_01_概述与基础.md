# 第1章：DDD概述与基础

## 1.1 DDD的起源与发展
- DDD由Eric Evans在2003年《领域驱动设计》一书中首次提出
  - 全称：Domain-Driven Design（领域驱动设计）
  - 诞生背景：解决企业级应用开发中的复杂性挑战
  - "蓝皮书"（Blue Book）的影响及地位
- DDD解决的核心问题：业务复杂性管理
  - 如何处理复杂业务逻辑与规则
  - 如何应对变化频繁的业务需求
  - 如何处理跨团队协作问题
- DDD在软件架构发展中的地位与影响
  - 从传统三层架构到六边形架构（端口与适配器）
  - DDD对微服务架构的影响与推动
  - 与敏捷方法论的协同作用
  - 战略设计（Strategic Design）与战术设计（Tactical Design）的区分

## 1.2 DDD的核心理念
- 领域（Domain）：问题空间与解决方案空间
  - 问题空间：业务领域知识和规则的集合
  - 解决方案空间：软件实现的具体技术和方法
  - 领域专家（Domain Expert）的重要性
  - 领域的边界与上下文（Context）
- 领域模型（Domain Model）：知识的有组织且可选择性的抽象
  - 从现实世界到代码的映射
  - 模型要素：实体（Entity）、值对象（Value Object）、聚合（Aggregate）等
  - 模型的验证与演化
  - 模型的表达方式：UML、代码、DSL等
- 统一语言（Ubiquitous Language）：团队共享的语言模型
  - 消除业务团队与技术团队间的沟通障碍
  - 统一语言的构建与维护
  - 术语表（Glossary）的作用与管理
  - 统一语言在代码中的体现
- 知识消化（Knowledge Crunching）：领域知识获取与提炼过程
  - 领域专家访谈技巧
  - 事件风暴（Event Storming）workshop
  - 用例分析与场景分析
  - 领域建模的迭代过程

## 1.3 DDD与传统开发模式的区别
- 与数据驱动设计的对比
  - 数据驱动：从数据库表设计出发
  - DDD：从业务概念与流程出发
  - 对象-关系映射（ORM）的挑战与策略
  - 贫血模型vs充血模型
- 与面向对象设计的关系
  - DDD是OO思想的一种应用与延伸
  - DDD对封装、继承、多态的特殊应用
  - DDD中的对象职责与设计原则
  - 行为与数据的统一
- DDD适用场景分析：复杂领域vs简单CRUD
  - 何时应用DDD：决策因素分析
  - 复杂性阈值：什么样的系统适合DDD
  - 过度设计（Over-engineering）的风险
  - 混合架构：在同一系统中部分应用DDD的策略

## 1.4 DDD的价值与挑战
- 业务价值：更好地应对复杂度，对齐业务与技术
  - 业务语言与代码的一致性带来的沟通效率
  - 减少需求理解偏差，提高软件质量
  - 适应业务变化的灵活性
  - 真实案例分析：DDD成功应用的业务收益
- 技术价值：模块化、可测试性、可维护性
  - 边界清晰的上下文减少耦合
  - 领域逻辑与基础设施的分离
  - 更容易实现的单元测试
  - 更清晰的代码组织结构
- 实施挑战：学习曲线陡峭、团队协作要求高
  - DDD学习难点分析
  - 传统开发团队转型DDD的阻力
  - 组织结构对DDD实施的影响（康威定律）
  - 领域专家参与的协调与管理
- 成本与收益平衡
  - 短期投入vs长期收益
  - 项目规模与复杂度对ROI的影响
  - 增量式应用DDD的策略
  - 如何评估DDD实施的成功度

## 1.5 DDD的核心构建块
- 实体（Entity）
  - 定义：具有唯一标识的对象
  - 实现：ID的管理与生命周期
  - 案例：用户、订单、产品等
- 值对象（Value Object）
  - 定义：没有唯一标识，通过属性值定义的对象
  - 不可变性（Immutability）的重要性
  - 案例：地址、金额、日期区间等
- 聚合（Aggregate）与聚合根（Aggregate Root）
  - 定义：一组相关对象的集合，作为一个整体被外界访问
  - 一致性边界与事务边界
  - 设计原则：小聚合vs大聚合的权衡
  - 聚合间的引用策略
- 领域服务（Domain Service）
  - 何时使用领域服务
  - 与应用服务的区别
  - 无状态服务设计
  - 防腐层（Anti-corruption Layer）的应用
- 领域事件（Domain Event）
  - 事件驱动架构与DDD的结合
  - 事件的发布与订阅机制
  - 事件溯源（Event Sourcing）概念
  - CQRS模式与领域事件

## 1.6 限界上下文（Bounded Context）
- 定义与作用
  - 模型的适用边界
  - 解决大型系统中模型一致性问题
- 上下文映射（Context Mapping）
  - 上下文间的关系类型：共享内核、客户-供应商等
  - 防腐层的设计与实现
  - 开放主机服务（Open Host Service）与发布语言（Published Language）
- 微服务架构中的限界上下文
  - 一个微服务对应一个限界上下文？
  - 服务边界的确定方法
  - 上下文间的集成策略

## 1.7 DDD与架构模式
- 分层架构
  - 传统四层：表现层、应用层、领域层、基础设施层
  - 依赖规则与依赖倒置原则
  - 各层的职责与交互方式
- 六边形架构（端口与适配器）
  - 核心思想：关注点分离
  - 与DDD的天然契合
  - 实现示例与最佳实践
- CQRS（命令查询职责分离）
  - 概念与原理
  - 何时应用CQRS
  - 与事件溯源的结合
  - 实现复杂度与性能考量

## 1.8 面试要点
- DDD的定义与核心思想
  - 一句话定义DDD
  - DDD的核心价值主张
  - 战略设计vs战术设计的要点
- 什么情况下应用DDD（何时适用/何时不适用）
  - 项目复杂度评估标准
  - 成本收益分析框架
  - 渐进式采用DDD的策略
- DDD与微服务架构的关系
  - 限界上下文与微服务边界
  - 微服务间通信与领域事件
  - 微服务治理中的DDD思想应用
- DDD实施的典型挑战与解决策略
  - 团队能力建设方案
  - 遗留系统向DDD迁移的方法
  - 常见的DDD实施误区
  - 案例分析：DDD实施成功与失败的经验教训
- 高频技术面试问题
  - 聚合设计的原则与实践
  - 领域事件的处理机制
  - 如何处理分布式事务在DDD中的挑战
  - 代码演示：一个DDD风格的核心领域模型示例 